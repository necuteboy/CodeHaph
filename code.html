<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Hamming code</title>
    <script>
        function code(){
            let message=document.getElementById('inputData').value;
            let inputDigits=message.split('');
            for(let i=0; i<inputDigits.length;i++){
                inputDigits[i]=inputDigits[i]*1;
            }
            inputDigits.push((inputDigits[0]+inputDigits[2]+inputDigits[3])%2);
            inputDigits.push((inputDigits[0]+inputDigits[1]+inputDigits[3])%2);
            inputDigits.push((inputDigits[1]+inputDigits[2]+inputDigits[3])%2);
            document.getElementById('codedData').value=inputDigits.join('');
        }
        function decode() {
            message = document.getElementById('codedData').value;
            inputDigits = message.split('');
            for (let i = 0; i < inputDigits.length; i++) {
                inputDigits[i] = inputDigits[i] * 1;
            }
            if ((inputDigits[0]+inputDigits[2]+inputDigits[3])%2==inputDigits[4]){
                if((inputDigits[0]+inputDigits[1]+inputDigits[3])%2==inputDigits[5]) {
                    if ((inputDigits[1] + inputDigits[2] + inputDigits[3]) % 2 != inputDigits[6]) {
                        inputDigits[6]=1-inputDigits[6]
                        alert("ошибка в 7 бите")
                    }
                }
                else{
                    if ((inputDigits[1] + inputDigits[2] + inputDigits[3]) % 2 != inputDigits[6]){
                        inputDigits[1]=1-inputDigits[1]
                        alert("ошибка во 2 бите")
                    }
                    else{
                        inputDigits[5]=1-inputDigits[5]
                        alert("ошибка в 6 бите")
                    }
                }
            }
            else if ((inputDigits[0]+inputDigits[1]+inputDigits[3])%2==inputDigits[5]){
                if((inputDigits[0]+inputDigits[2]+inputDigits[3])%2==inputDigits[4]) {
                    if ((inputDigits[1] + inputDigits[2] + inputDigits[3]) % 2 != inputDigits[6]) {
                        inputDigits[6]=1-inputDigits[6]
                        alert("ошибка в 7 бите")
                    }
                }
                else{
                    if ((inputDigits[1] + inputDigits[2] + inputDigits[3]) % 2 != inputDigits[6]){
                        inputDigits[2]=1-inputDigits[2]
                        alert("ошибка в 3 бите")
                    }
                    else{
                        inputDigits[4]=1-inputDigits[4]
                        alert("ошибка в 5 бите")
                    }
                }
            }
            else if ((inputDigits[1] + inputDigits[2] + inputDigits[3]) % 2 == inputDigits[6]){
                if((inputDigits[0]+inputDigits[2]+inputDigits[3])%2==inputDigits[4]) {
                    if ((inputDigits[0] + inputDigits[1] + inputDigits[3]) % 2 != inputDigits[5]) {
                        inputDigits[5]=1-inputDigits[5]
                        alert("ошибка в 6 бите")
                    }
                }
                else{
                    if ((inputDigits[0] + inputDigits[1] + inputDigits[3]) % 2 != inputDigits[5]){
                        inputDigits[0]=1-inputDigits[0]
                        alert("ошибка в 1 бите")
                    }
                    else{
                        inputDigits[4]=1-inputDigits[4]
                        alert("ошибка в 5 бите")
                    }
                }
            }
            else if ((inputDigits[1] + inputDigits[2] + inputDigits[3]) % 2 != inputDigits[6]){
                if ((inputDigits[0]+inputDigits[2]+inputDigits[3])%2!=inputDigits[4]){
                    if ((inputDigits[0] + inputDigits[1] + inputDigits[3]) % 2 != inputDigits[5]){
                        inputDigits[3]=1-inputDigits[3]
                        alert("ошибка в 3 бите")
                    }
                }
            }
            document.getElementById('decodedData').value=inputDigits.join('');
        }
    </script>
    </head>
    <body>
        <p> <input type='text' id="inputData"/> input data </p>
        <p> <input type='button' onclick="code()" value="Code"/> </p>
        <p> <input type='text' id="codedData"/>  coded data </p>
        <p> <input type='button' onclick="decode()" value="deCode"/> </p>
        <p> <input type='text' id="decodedData" /> decode data </p>
    </body>
</html>

